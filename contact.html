<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ribbon Animation Test</title>
    <link rel="stylesheet" href="gallery.css"> 
    
    <style>
        /* --- 1. DARK BACKGROUND & BASIC SETUP --- */
        body { margin: 0; background: #050505; overflow: hidden; height: 100vh; }
        
        #sphere-hero {
            position: relative; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            perspective: 1200px;
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 90%);
        }
        .sphere-container { position: relative; transform-style: preserve-3d; }

        /* --- 2. YOUR EXISTING GALLERY ITEMS (Artworks) --- */
        .gallery-item {
            position: absolute; top: 0; left: 0;
            transform-style: preserve-3d; backface-visibility: hidden;
        }
        .gallery-item img {
            width: 100%; height: 100%; object-fit: cover;
            border: 2px solid #D4AF37; /* Fixed Gold Border */
            box-shadow: 0 0 20px rgba(0,0,0,0.9);
        }

        /* --- 3. THE NEW "RIBBON" CLASS (The Magic Part) --- */
        .ribbon-item {
            position: absolute; top: 0; left: 0;
            width: 25px;   /* Thin strip */
            height: 300px; /* Long and elegant */
            
            /* THE RED & GOLD SHINE GRADIENT */
            background: linear-gradient(135deg, 
                #4a0000 0%,   /* Deep Red */
                #b30000 25%,  /* Bright Red */
                #D4AF37 50%,  /* Gold Shine */
                #b30000 75%,  /* Bright Red */
                #4a0000 100%  /* Deep Red */
            );
            
            /* Make it look like fabric/metal */
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.4); 
            border: 1px solid rgba(212, 175, 55, 0.3);
            opacity: 0.9;
            backface-visibility: visible; /* Visible from both sides */
            
            /* ANIMATION: Gentle Twisting */
            animation: ribbonFloat 6s infinite ease-in-out alternate;
        }

        /* The animation that makes it "wave" */
        @keyframes ribbonFloat {
            0% { transform: translateY(0) rotateX(0deg); filter: brightness(1); }
            100% { transform: translateY(-20px) rotateX(15deg); filter: brightness(1.3); }
        }
    </style>
</head>
<body>

    <div id="sphere-hero">
        <div class="sphere-container" id="sphere">
            </div>
        
        <h1 style="position:absolute; bottom:50px; left:50px; color:#D4AF37; font-family:serif; font-size:2rem; pointer-events:none;">
            Ribbon Motion Test
        </h1>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <script>
        const sphereContainer = document.getElementById('sphere');
        const totalItems = 45; // 40 Art + 5 Ribbons
        const radius = 550; // Slightly wider for drama

        // We will create a loop.
        // EVERY 8th item will be a RIBBON. The rest are IMAGES.
        
        for (let i = 0; i < totalItems; i++) {
            const div = document.createElement('div');
            
            // --- THE LOGIC: Is this a Ribbon or Art? ---
            // If the number is divisible by 8 (0, 8, 16...), make a Ribbon!
            if (i % 8 === 0) {
                
                div.className = 'ribbon-item';
                // No image inside, just the colored div
                
            } else {
                
                // STANDARD ART ITEM
                div.className = 'gallery-item';
                // Random Size (as per your Pinterest style)
                const r = Math.random();
                if(r < 0.4) { div.style.width='100px'; div.style.height='150px'; }
                else if(r < 0.7) { div.style.width='150px'; div.style.height='100px'; }
                else { div.style.width='120px'; div.style.height='120px'; }
                
                const img = document.createElement('img');
                // Using a placeholder image so you can see it working immediately
                // In your real file, this will be: `images/untitled${i}.webp`
                img.src = `images/untitled${(i % 17) + 1}.webp`; 
                
                // Fallback if image missing (grey box)
                img.onerror = function(){ this.style.backgroundColor = '#222'; };
                
                div.appendChild(img);
            }

            // --- MATH FOR SPHERE SHAPE ---
            const phi = Math.acos(-1 + (2 * i) / totalItems);
            const theta = Math.sqrt(totalItems * Math.PI) * phi;
            
            const x = radius * Math.cos(theta) * Math.sin(phi);
            const y = radius * Math.sin(theta) * Math.sin(phi);
            const z = radius * Math.cos(phi);

            // Apply 3D position
            // Note: We add `preserve-3d` to keep ribbons flat in space
            div.style.transform = `translate3d(${x}px, ${y}px, ${z}px) rotateY(${theta}rad) rotateX(${phi}rad)`;
            
            sphereContainer.appendChild(div);
        }

        // --- ANIMATION: Rotate the Sphere ---
        let rotX = 0, rotY = 0, isDragging = false, startX, startY;
        const hero = document.getElementById('sphere-hero');

        hero.addEventListener('mousedown', (e) => { isDragging=true; startX=e.clientX; startY=e.clientY; });
        window.addEventListener('mouseup', () => { isDragging=false; });
        window.addEventListener('mousemove', (e) => {
            if(!isDragging) return;
            const dx = e.clientX - startX; const dy = e.clientY - startY;
            rotY += dx * 0.15; rotX -= dy * 0.15;
            gsap.to(sphereContainer, { rotationY: rotY, rotationX: rotX, duration: 0.8 });
            startX = e.clientX; startY = e.clientY;
        });

        // Auto-Spin
        gsap.to(sphereContainer, { rotationY: "+=360", rotationX: "-=360", duration: 120, repeat: -1, ease: "none" });

    </script>
</body>
</html>